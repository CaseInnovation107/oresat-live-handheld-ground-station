<!DOCTYPE html>
<html>
<!--Page information and format sources-->
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>OreSat Live - Streaming Page</title>
  <link rel="stylesheet" href="assets/HuGS.css" />
  <link rel="icon" href="assets/img/oresat.svg"/>
  <script src="assets/jquery.min.js"></script>

  <!-- Allows for pausing of video stream -->
  <script>
    var playing = true;
    var callback;

    function reload_img() {
      var d = new Date();
      document.getElementById('live-stream').src="/latest.jpg?now="+d.getTime();
    }

    function play() {
      var btn = document.getElementById('btn');
      btn.innerText = 'Pause';
      callback = setInterval(reload_img, 500);
      playing = true;
    }

    function pause() {
      var btn = document.getElementById('btn');
      btn.innerText = 'Play';
      clearInterval(callback);
      playing = false;
    }

    function btn_clicked() {
      if (playing == true) { 
        pause();
      }
      else {
        play();
      }
    }

  </script>
</head>

<!------------------------------------>
<!--Top Navigation bar for page-->
<div class="topnav">
    <img src="assets/img/psas.svg"/>
    <img src="assets/img/oresat.svg"/>
    
    <div class="title">OreSat Live</div>
    <a href="#home">Home</a>
  </div>

<!------------------------------------>
<!--Page Contents-->
<body onload = "play()">
<div class="stream-wrapper">
  <div class="stream-container">
    <img id="live-stream" src="/latest.jpg" onerror="this.src='assets/img/stream_error.png'" alt="Live Stream">
  </div>



  <br>
  <table class="stream-info-wrapper" cellspacing="0">
      <tr class="top bottom row">
        <td>Local Time:</td>
        <td colspan=2><span id="hours"></span><span id="colon">:</span><span id="minutes"></span><span id="colon2">:</span><span id="seconds"></span></td>
      </tr>
    <tr>
      <th>AOS</th><th>Zenith</th><th>LOS</th>
    </tr>
    <tr>
      <td>Time AOS</td><td>Time Zenith</td><td>Time LOS</td>
    </tr>
    <tr>
      <td>T+##s</td><td>T-##s</td><td>T-##s</td>
    </tr>
  </table>

</div>
</body>

<script type="text/javascript">
var toggle = true;
setInterval(function() {
  var d = new Date().toLocaleTimeString('en-US', { hour12: false, hour: 'numeric', minute: 'numeric' , second: 'numeric'});
  var parts = d.split(":");
  $('#hours').text(parts[0]);
  $('#minutes').text(parts[1]);
  $('#seconds').text(parts[2]);
  $("#colon").css({ visibility: toggle?"visible":"hidden"});
  $("#colon2").css({ visibility: toggle?"visible":"hidden"});
  toggle=!toggle;
},1000);
</script>
</html>
